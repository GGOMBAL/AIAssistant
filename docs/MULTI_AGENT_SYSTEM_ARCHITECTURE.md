# Multi-Agent System Architecture Documentation

**í”„ë¡œì íŠ¸**: AI Assistant Multi-Agent Trading System
**ë²„ì „**: 2.0
**ì‘ì„±ì¼**: 2025-09-21
**ì—…ë°ì´íŠ¸**: ì „ì²´ ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜ í†µí•© ë¶„ì„ ì™„ë£Œ

---

## ğŸ¯ ì‹œìŠ¤í…œ ê°œìš”

AI Assistant í”„ë¡œì íŠ¸ëŠ” **5ê°œì˜ ì „ë¬¸í™”ëœ ì—ì´ì „íŠ¸ê°€ í˜‘ì—…í•˜ëŠ” ë¶„ì‚° íŠ¸ë ˆì´ë”© ì‹œìŠ¤í…œ**ì…ë‹ˆë‹¤. ê° ì—ì´ì „íŠ¸ëŠ” ëª…í™•í•˜ê²Œ ë¶„ë¦¬ëœ ì±…ì„ì„ ê°€ì§€ë©°, ì •ì˜ëœ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì•ˆì „í•˜ê²Œ í˜‘ì—…í•©ë‹ˆë‹¤.

### í•µì‹¬ ì„¤ê³„ ì›ì¹™
- **ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬**: ê° ì—ì´ì „íŠ¸ëŠ” íŠ¹ì • ë„ë©”ì¸ë§Œ ë‹´ë‹¹
- **ëŠìŠ¨í•œ ê²°í•©**: ì—ì´ì „íŠ¸ê°„ ìµœì†Œí•œì˜ ì˜ì¡´ì„± ìœ ì§€
- **ë³´ì•ˆ ê²©ë¦¬**: íŒŒì¼ ì ‘ê·¼ ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤ë¡œ ë³´ì•ˆ ë³´ì¥
- **í™•ì¥ì„±**: ìƒˆë¡œìš´ ê¸°ëŠ¥ì€ í•´ë‹¹ ì—ì´ì „íŠ¸ì—ë§Œ ì¶”ê°€

---

## ğŸ—ï¸ ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ë©€í‹° ì—ì´ì „íŠ¸ ê³„ì¸µ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Orchestrator Agent                        â”‚
â”‚                   (ì „ì²´ ì›Œí¬í”Œë¡œìš° ê´€ë¦¬)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   â€¢ ì—ì´ì „íŠ¸ê°„ ì‘ì—… í• ë‹¹ ë° ì¡°ì •                          â”‚   â”‚
â”‚  â”‚   â€¢ í”„ë¡¬í”„íŠ¸ ìƒì„± ë° ì‘ë‹µ ìˆ˜ì§‘                           â”‚   â”‚
â”‚  â”‚   â”‚   â€¢ í’ˆì§ˆ í‰ê°€ ë° êµì •                              â”‚   â”‚
â”‚  â”‚   â€¢ ì‹œìŠ¤í…œ ìƒíƒœ ëª¨ë‹ˆí„°ë§                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
â”‚ Data  â”‚    â”‚Strategyâ”‚    â”‚Serviceâ”‚    â”‚Helper â”‚
â”‚Agent  â”‚    â”‚ Agent â”‚    â”‚ Agent â”‚    â”‚Agent  â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”˜
    â”‚            â”‚            â”‚            â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”Œâ–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Indicator  â”‚â”‚Strategy    â”‚â”‚Backtest    â”‚â”‚Broker API     â”‚
â”‚Technical  â”‚â”‚Signal Gen  â”‚â”‚Order Exec  â”‚â”‚Data Provider  â”‚
â”‚Database   â”‚â”‚Position    â”‚â”‚Risk Mgmt   â”‚â”‚Notification   â”‚
â”‚Manager    â”‚â”‚Account     â”‚â”‚Performance â”‚â”‚Authentication â”‚
â”‚           â”‚â”‚Analysis    â”‚â”‚Reporting   â”‚â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¤– ì—ì´ì „íŠ¸ë³„ ìƒì„¸ êµ¬ì¡°

### 1. Orchestrator Agent
**ì—­í• **: ì „ì²´ ì‹œìŠ¤í…œì˜ ì§€íœ˜íƒ‘
**ëª¨ë¸**: Claude-3-Opus (ê³ ì„±ëŠ¥ ì˜ì‚¬ê²°ì •ìš©)

#### í•µì‹¬ ê¸°ëŠ¥
- **ì›Œí¬í”Œë¡œìš° ì¡°ì •**: ì „ì²´ ê±°ë˜ í”„ë¡œì„¸ìŠ¤ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜
- **í”„ë¡¬í”„íŠ¸ ê´€ë¦¬**: ê° ì„œë¸Œ ì—ì´ì „íŠ¸ë³„ ìµœì í™”ëœ í”„ë¡¬í”„íŠ¸ ìƒì„±
- **í’ˆì§ˆ ê´€ë¦¬**: ì„œë¸Œ ì—ì´ì „íŠ¸ ì‘ë‹µ í’ˆì§ˆ í‰ê°€ ë° êµì •
- **ìƒíƒœ ëª¨ë‹ˆí„°ë§**: ì‹œìŠ¤í…œ ì „ì²´ ìƒíƒœ ì¶”ì  ë° ì•Œë¦¼

#### ì ‘ê·¼ ê¶Œí•œ
- **ì½ê¸° ì „ìš©**: ëª¨ë“  ì—ì´ì „íŠ¸ì˜ ì¶œë ¥ ê²°ê³¼
- **ì“°ê¸° ê¶Œí•œ**: ì›Œí¬í”Œë¡œìš° ì„¤ì •, ì‹œìŠ¤í…œ ë¡œê·¸

### 2. Data Agent
**ì—­í• **: ë°ì´í„° ìˆ˜ì§‘, ì²˜ë¦¬, ê´€ë¦¬ì˜ ì „ë¬¸ê°€
**ëª¨ë¸**: Gemini-2.5-Flash (ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ìš©)

#### í•µì‹¬ ì„œë¹„ìŠ¤
```
Project/indicator/
â”œâ”€â”€ TechnicalIndicatorGenerator    # ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚° ì—”ì§„
â”‚   â”œâ”€â”€ ê°€ê²© ì§€í‘œ (SMA, EMA, Bollinger)
â”‚   â”œâ”€â”€ ëª¨ë©˜í…€ ì§€í‘œ (RSI, MACD, Stochastic)
â”‚   â”œâ”€â”€ ë³¼ë¥¨ ì§€í‘œ (Volume SMA, OBV)
â”‚   â””â”€â”€ ì»¤ìŠ¤í…€ ì§€í‘œ (RS, ADR, Breakout)
â””â”€â”€ DataFrameGenerator           # ë°ì´í„°í”„ë ˆì„ ìƒì„± ê´€ë¦¬
    â”œâ”€â”€ ë‹¤ì¤‘ ì†ŒìŠ¤ ë°ì´í„° í†µí•©
    â”œâ”€â”€ ì‹œê³„ì—´ ë°ì´í„° ì •ê·œí™”
    â”œâ”€â”€ ê²°ì¸¡ê°’ ì²˜ë¦¬ ë° í’ˆì§ˆ ê²€ì¦
    â””â”€â”€ ë©”ëª¨ë¦¬ ìµœì í™” ë° ìºì‹±

Project/database/
â”œâ”€â”€ DatabaseManager              # í†µí•© ë°ì´í„°ë² ì´ìŠ¤ ê´€ë¦¬ì
â”œâ”€â”€ MongoDBOperations           # MongoDB CRUD ì—°ì‚°
â”œâ”€â”€ USMarketDataManager         # ë¯¸êµ­ ì‹œì¥ ì „ìš© ê´€ë¦¬
â”œâ”€â”€ HistoricalDataManager       # ê³„ì¢Œ/ê±°ë˜ ë‚´ì—­ ê´€ë¦¬
â””â”€â”€ DatabaseNameCalculator      # DB ëª…ëª… ê·œì¹™ ê´€ë¦¬
```

#### ì ‘ê·¼ ê¶Œí•œ
- **ë…ì  ê¶Œí•œ**: `Project/indicator/`, `Project/database/`
- **ì½ê¸° ì „ìš©**: `config/api_credentials.yaml`, `config/broker_config.yaml`

### 3. Strategy Agent
**ì—­í• **: ê±°ë˜ ì „ëµ ê°œë°œ ë° ì‹ í˜¸ ìƒì„±ì˜ í•µì‹¬
**ëª¨ë¸**: Gemini-2.5-Flash (ì „ëµ ê³„ì‚°ìš©)

#### í•µì‹¬ ì„œë¹„ìŠ¤
```
Project/strategy/
â”œâ”€â”€ SignalGenerationService      # ë§¤ë§¤ ì‹ í˜¸ ìƒì„± ì—”ì§„
â”‚   â”œâ”€â”€ ë‹¤ì¤‘ íƒ€ì„í”„ë ˆì„ ë¶„ì„ (2Y, 1Y, 6M, 3M, 1M)
â”‚   â”œâ”€â”€ ìƒëŒ€ê°•ë„(RS) ì‹ í˜¸ (4ì£¼, 12ì£¼)
â”‚   â”œâ”€â”€ í€ë”ë©˜í„¸ í•„í„°ë§
â”‚   â”œâ”€â”€ ëŒíŒŒ íŒ¨í„´ ì¸ì‹
â”‚   â””â”€â”€ ì‹ í˜¸ ê°•ë„ ê³„ì‚°
â”œâ”€â”€ PositionSizingService        # í¬ì§€ì…˜ ì‚¬ì´ì§• ë° ë¦¬ìŠ¤í¬ ê´€ë¦¬
â”‚   â”œâ”€â”€ ADR ê¸°ë°˜ í¬ì§€ì…˜ ê³„ì‚°
â”‚   â”œâ”€â”€ ë™ì  ì†ì ˆê°€ ê³„ì‚°
â”‚   â”œâ”€â”€ í”¼ë¼ë¯¸ë”© ì „ëµ
â”‚   â”œâ”€â”€ ìŠ¹ë¥  ë¶„ì„
â”‚   â””â”€â”€ í¬íŠ¸í´ë¦¬ì˜¤ ì§‘ì¤‘ë„ ê´€ë¦¬
â””â”€â”€ AccountAnalysisService       # ê³„ì¢Œ ë¶„ì„ ë° í‰ê°€
    â”œâ”€â”€ ë³´ìœ  ì¢…ëª© ìƒì„¸ ë¶„ì„
    â”œâ”€â”€ í¬íŠ¸í´ë¦¬ì˜¤ ë¦¬ìŠ¤í¬ í‰ê°€
    â”œâ”€â”€ ë§¤ë„ ì¶”ì²œ ìƒì„±
    â”œâ”€â”€ ì§‘ì¤‘ë„ ë¦¬ìŠ¤í¬ ê³„ì‚° (HHI)
    â””â”€â”€ ì„±ê³¼ ì§€í‘œ ê³„ì‚°
```

#### ì ‘ê·¼ ê¶Œí•œ
- **ë…ì  ê¶Œí•œ**: `Project/strategy/`
- **ì½ê¸° ì „ìš©**: `Project/indicator/`, `config/risk_management.yaml`

### 4. Service Agent
**ì—­í• **: ë°±í…ŒìŠ¤íŒ…, ì£¼ë¬¸ ì‹¤í–‰, ì„±ê³¼ ë¶„ì„
**ëª¨ë¸**: Gemini-2.5-Flash (ì„œë¹„ìŠ¤ ì‹¤í–‰ìš©)

#### í•µì‹¬ ì„œë¹„ìŠ¤
```
Project/service/
â”œâ”€â”€ BacktestEngine              # ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì—”ì§„
â”‚   â”œâ”€â”€ buy_stock()            # ë§¤ìˆ˜ ì‹¤í–‰ (Strategy Layerì—ì„œ ì´ê´€)
â”‚   â”œâ”€â”€ sell_stock()           # ë§¤ë„ ì‹¤í–‰ (Strategy Layerì—ì„œ ì´ê´€)
â”‚   â”œâ”€â”€ half_sell_stock()      # ë¶€ë¶„ ë§¤ë„ (Strategy Layerì—ì„œ ì´ê´€)
â”‚   â”œâ”€â”€ pyramid_buy()          # í”¼ë¼ë¯¸ë”© ë§¤ìˆ˜
â”‚   â””â”€â”€ whipsaw_protection()   # íœ©ì†Œ ë°©ì§€
â”œâ”€â”€ OrderExecutionService       # ì‹¤ì œ ì£¼ë¬¸ ì‹¤í–‰
â”‚   â”œâ”€â”€ ì‹¤ì‹œê°„ ì£¼ë¬¸ ì²˜ë¦¬
â”‚   â”œâ”€â”€ ì£¼ë¬¸ ìƒíƒœ ì¶”ì 
â”‚   â”œâ”€â”€ ì²´ê²° í™•ì¸ ë° ì•Œë¦¼
â”‚   â””â”€â”€ ì˜¤ë¥˜ ì²˜ë¦¬ ë° ì¬ì‹œë„
â”œâ”€â”€ RiskManagementService       # ë¦¬ìŠ¤í¬ ê´€ë¦¬
â”‚   â”œâ”€â”€ ì‹¤ì‹œê°„ ë¦¬ìŠ¤í¬ ëª¨ë‹ˆí„°ë§
â”‚   â”œâ”€â”€ í¬ì§€ì…˜ í•œë„ ê²€ì¦
â”‚   â”œâ”€â”€ ì†ì‹¤ ì œí•œ ì ìš©
â”‚   â””â”€â”€ ì‘ê¸‰ ì²­ì‚° ë¡œì§
â””â”€â”€ PerformanceAnalyzer        # ì„±ê³¼ ë¶„ì„
    â”œâ”€â”€ ìˆ˜ìµë¥  ê³„ì‚°
    â”œâ”€â”€ ìƒ¤í”„ ë¹„ìœ¨, ìµœëŒ€ ë‚™í­
    â”œâ”€â”€ ê±°ë˜ í†µê³„ ë¶„ì„
    â””â”€â”€ ë²¤ì¹˜ë§ˆí¬ ë¹„êµ
```

#### ì ‘ê·¼ ê¶Œí•œ
- **ë…ì  ê¶Œí•œ**: `Project/service/`
- **ì½ê¸° ì „ìš©**: `Project/strategy/`, `Project/database/`

### 5. Helper Agent
**ì—­í• **: ì™¸ë¶€ ì„¸ê³„ì™€ì˜ ëª¨ë“  ì—°ê²° ë‹´ë‹¹
**ëª¨ë¸**: Gemini-2.5-Flash (API í†µì‹ ìš©)

#### í•µì‹¬ ì„œë¹„ìŠ¤
```
Project/Helper/
â”œâ”€â”€ DataProviderAPI             # ì™¸ë¶€ ë°ì´í„° ì œê³µì í†µí•©
â”‚   â”œâ”€â”€ AlphaVantageAPI        # ê³ í’ˆì§ˆ ì‹œì¥ ë°ì´í„°
â”‚   â”œâ”€â”€ YahooFinanceAPI        # ë¬´ë£Œ ì‹œì¥ ë°ì´í„°
â”‚   â”œâ”€â”€ DataProviderManager    # ë‹¤ì¤‘ ì œê³µì ê´€ë¦¬
â”‚   â””â”€â”€ Rate Limiting & Caching
â”œâ”€â”€ BrokerAPIConnector          # ë¸Œë¡œì»¤ API í†µí•©
â”‚   â”œâ”€â”€ KISBrokerAPI          # í•œêµ­íˆ¬ìì¦ê¶Œ API
â”‚   â”œâ”€â”€ KISUSHelper           # ë¯¸êµ­ ê±°ë˜ ì „ìš©
â”‚   â”œâ”€â”€ BrokerAPIManager      # ë‹¤ì¤‘ ë¸Œë¡œì»¤ ê´€ë¦¬
â”‚   â””â”€â”€ Authentication & Security
â””â”€â”€ NotificationService         # ì•Œë¦¼ ì„œë¹„ìŠ¤
    â”œâ”€â”€ TelegramBot           # ê¸°ë³¸ í…”ë ˆê·¸ë¨ ê¸°ëŠ¥
    â”œâ”€â”€ TelegramNotificationService  # ê±°ë˜ ì•Œë¦¼ íŠ¹í™”
    â”œâ”€â”€ TelegramCommandHandler     # ëª…ë ¹ì–´ ì²˜ë¦¬
    â””â”€â”€ Template Management
```

#### ì ‘ê·¼ ê¶Œí•œ
- **ë…ì  ê¶Œí•œ**: `Project/Helper/`, `myStockInfo.yaml`
- **ì½ê¸° ì „ìš©**: `config/api_credentials.yaml`, `config/broker_config.yaml`

---

## ğŸ”— ì—ì´ì „íŠ¸ê°„ ì¸í„°í˜ì´ìŠ¤ ë§¤íŠ¸ë¦­ìŠ¤

### ë°ì´í„° í”Œë¡œìš° ì¸í„°í˜ì´ìŠ¤
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚ Orchestratorâ”‚ Data Agent  â”‚Strategy Agt â”‚Service Agt  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚Orchestrator â”‚      -      â”‚ ì‘ì—…í• ë‹¹    â”‚ ì‘ì—…í• ë‹¹    â”‚ ì‘ì—…í• ë‹¹    â”‚
â”‚Data Agent   â”‚ ë°ì´í„°ìƒíƒœ  â”‚      -      â”‚ ê¸°ìˆ ì§€í‘œ    â”‚ ë°ì´í„°ì¡°íšŒ  â”‚
â”‚Strategy Agt â”‚ ì‹ í˜¸ê²°ê³¼    â”‚ ë°ì´í„°ìš”ì²­  â”‚      -      â”‚ ì£¼ë¬¸ì‹ í˜¸    â”‚
â”‚Service Agt  â”‚ ì‹¤í–‰ê²°ê³¼    â”‚ ê±°ë˜ì €ì¥    â”‚ ì„±ê³¼í”¼ë“œë°±  â”‚      -      â”‚
â”‚Helper Agent â”‚ APIìƒíƒœ     â”‚ ì‹œì¥ë°ì´í„°  â”‚ ê³„ì¢Œì •ë³´    â”‚ ì£¼ë¬¸ì‹¤í–‰    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” ì¸í„°í˜ì´ìŠ¤ ì •ì˜

#### 1. Market Data Interface (Helper â†’ Data)
```python
{
    "symbols": List[str],
    "data_type": "ohlcv|fundamental|earnings",
    "timeframe": "1min|1h|1d|1w",
    "start_date": datetime,
    "end_date": datetime,
    "provider": "alpha_vantage|yahoo_finance"
}
```

#### 2. Technical Analysis Interface (Data â†’ Strategy)
```python
{
    "daily_indicators": Dict[str, pd.DataFrame],
    "weekly_indicators": Dict[str, pd.DataFrame],
    "rs_indicators": Dict[str, pd.DataFrame],
    "fundamental_data": Dict[str, pd.DataFrame],
    "metadata": {
        "last_update": datetime,
        "data_quality": float,
        "coverage_ratio": float
    }
}
```

#### 3. Trading Signal Interface (Strategy â†’ Service)
```python
{
    "signal_type": "BUY|SELL|HOLD",
    "signal_strength": float,  # 0.0 ~ 1.0
    "position_size": float,
    "target_price": float,
    "stop_loss": float,
    "confidence": float,
    "reasoning": str
}
```

#### 4. Order Execution Interface (Service â†’ Helper)
```python
{
    "order_id": str,
    "symbol": str,
    "side": "BUY|SELL",
    "quantity": int,
    "price": float,
    "order_type": "MARKET|LIMIT",
    "account_type": "REAL|VIRTUAL"
}
```

#### 5. Account Status Interface (Helper â†’ Strategy)
```python
{
    "balance": {
        "cash": float,
        "total_asset": float,
        "buying_power": float
    },
    "holdings": List[Dict[str, Any]],
    "trading_status": {
        "is_market_open": bool,
        "last_sync": datetime
    }
}
```

---

## ğŸ—‚ï¸ íŒŒì¼ ì†Œìœ ê¶Œ ë° ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤

### ì „ì²´ ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ íŒŒì¼/ë””ë ‰í† ë¦¬           â”‚ Orchâ”‚ Data â”‚ Strategy â”‚ Service â”‚ Helper â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Project/indicator/      â”‚  R  â”‚  RW  â”‚    R     â”‚    R    â”‚   -    â”‚
â”‚ Project/database/       â”‚  R  â”‚  RW  â”‚    R     â”‚    R    â”‚   -    â”‚
â”‚ Project/strategy/       â”‚  R  â”‚  -   â”‚    RW    â”‚    R    â”‚   -    â”‚
â”‚ Project/service/        â”‚  R  â”‚  -   â”‚    R     â”‚   RW    â”‚   -    â”‚
â”‚ Project/Helper/         â”‚  R  â”‚  -   â”‚    -     â”‚    -    â”‚   RW   â”‚
â”‚ myStockInfo.yaml        â”‚  -  â”‚  -   â”‚    -     â”‚    -    â”‚   RW   â”‚
â”‚ config/*.yaml           â”‚  R  â”‚  R   â”‚    R     â”‚    R    â”‚   R    â”‚
â”‚ storage/                â”‚  RW â”‚  RW  â”‚    R     â”‚   RW    â”‚   RW   â”‚
â”‚ outputs/                â”‚  RW â”‚  R   â”‚    R     â”‚   RW    â”‚   R    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ë²”ë¡€: R=ì½ê¸°, W=ì“°ê¸°, RW=ì½ê¸°+ì“°ê¸°, -=ì ‘ê·¼ê¸ˆì§€
```

### ìƒì„¸ ê¶Œí•œ ì •ì˜

#### ë…ì  ê¶Œí•œ (EXCLUSIVE)
- **Data Agent**: `Project/indicator/`, `Project/database/`
- **Strategy Agent**: `Project/strategy/`
- **Service Agent**: `Project/service/`
- **Helper Agent**: `Project/Helper/`, `myStockInfo.yaml`

#### ê³µìœ  ì½ê¸° ê¶Œí•œ (SHARED READ)
- **ëª¨ë“  ì—ì´ì „íŠ¸**: `config/*.yaml` (ì„¤ì • íŒŒì¼)
- **Data, Service, Helper**: `storage/` (ë°ì´í„° ì €ì¥ì†Œ)

#### í¬ë¡œìŠ¤ ì—ì´ì „íŠ¸ ì ‘ê·¼
- **Strategy â†’ Data**: ê¸°ìˆ ì§€í‘œ ë°ì´í„° ì½ê¸°
- **Service â†’ Strategy**: ì‹ í˜¸ ë°ì´í„° ì½ê¸°
- **Service â†’ Database**: ê±°ë˜ ë‚´ì—­ ì €ì¥

---

## âš™ï¸ ì„¤ì • íŒŒì¼ ì•„í‚¤í…ì²˜

### ì„¤ì • íŒŒì¼ ê³„ì¸µêµ¬ì¡°
```
config/
â”œâ”€â”€ agent_model.yaml           # ì—ì´ì „íŠ¸ë³„ LLM ëª¨ë¸ ì„¤ì •
â”œâ”€â”€ api_credentials.yaml       # ì™¸ë¶€ API ìê²©ì¦ëª… (ì•”í˜¸í™”)
â”œâ”€â”€ broker_config.yaml        # ë¸Œë¡œì»¤ ì„¤ì • ë° ì‹œì¥ ì •ë³´
â”œâ”€â”€ risk_management.yaml      # ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì •ì±…
â”œâ”€â”€ mcp_integration.yaml      # MCP í†µí•© ì„¤ì • (ì‹ ê·œ)
â”œâ”€â”€ agent_interfaces.yaml     # ì—ì´ì „íŠ¸ê°„ ì¸í„°í˜ì´ìŠ¤ ì •ì˜ (ì‹ ê·œ)
â””â”€â”€ file_ownership.yaml       # íŒŒì¼ ì ‘ê·¼ ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤ (ì‹ ê·œ)
```

#### 1. agent_model.yaml
```yaml
agents:
  orchestrator:
    primary_model: "claude-3-opus-20240229"
    fallback_model: "claude-3-sonnet-20240229"
    max_tokens: 4000
    temperature: 0.1

  data_agent:
    primary_model: "gemini-2.5-flash"
    fallback_model: "claude-3-sonnet-20240229"
    max_tokens: 8000
    temperature: 0.0

  strategy_agent:
    primary_model: "gemini-2.5-flash"
    fallback_model: "claude-3-sonnet-20240229"
    max_tokens: 4000
    temperature: 0.1

  service_agent:
    primary_model: "gemini-2.5-flash"
    fallback_model: "claude-3-sonnet-20240229"
    max_tokens: 4000
    temperature: 0.0

  helper_agent:
    primary_model: "gemini-2.5-flash"
    fallback_model: "claude-3-sonnet-20240229"
    max_tokens: 4000
    temperature: 0.0
```

#### 2. agent_interfaces.yaml (ì‹ ê·œ)
```yaml
interfaces:
  market_data:
    provider: "helper_agent"
    consumer: "data_agent"
    schema: "market_data_schema_v1"
    validation: true

  technical_indicators:
    provider: "data_agent"
    consumer: "strategy_agent"
    schema: "indicators_schema_v1"
    validation: true

  trading_signals:
    provider: "strategy_agent"
    consumer: "service_agent"
    schema: "signals_schema_v1"
    validation: true

  order_execution:
    provider: "service_agent"
    consumer: "helper_agent"
    schema: "orders_schema_v1"
    validation: true

schemas:
  market_data_schema_v1:
    required_fields: ["symbol", "timestamp", "ohlcv"]
    data_types: {"price": "float", "volume": "int"}

  indicators_schema_v1:
    required_fields: ["symbol", "indicator_type", "value", "timestamp"]
    data_types: {"value": "float"}
```

#### 3. file_ownership.yaml (ì‹ ê·œ)
```yaml
ownership:
  data_agent:
    exclusive:
      - "Project/indicator/"
      - "Project/database/"
    read_only:
      - "config/api_credentials.yaml"
      - "config/broker_config.yaml"

  strategy_agent:
    exclusive:
      - "Project/strategy/"
    read_only:
      - "Project/indicator/"
      - "config/risk_management.yaml"

  service_agent:
    exclusive:
      - "Project/service/"
    read_only:
      - "Project/strategy/"
      - "Project/database/"

  helper_agent:
    exclusive:
      - "Project/Helper/"
      - "myStockInfo.yaml"
    read_only:
      - "config/api_credentials.yaml"
      - "config/broker_config.yaml"

access_matrix:
  orchestrator_agent: ["R", "R", "R", "R", "R"]
  data_agent: ["RW", "-", "R", "R", "-"]
  strategy_agent: ["R", "RW", "R", "-", "-"]
  service_agent: ["R", "R", "RW", "-", "-"]
  helper_agent: ["-", "-", "-", "RW", "RW"]
```

---

## ğŸ”„ ì‹œìŠ¤í…œ ì›Œí¬í”Œë¡œìš°

### 1. ì „ì²´ ê±°ë˜ ì›Œí¬í”Œë¡œìš°
```
1. [Helper] ì‹œì¥ ë°ì´í„° ìˆ˜ì§‘
     â†“
2. [Data] ê¸°ìˆ ì  ì§€í‘œ ê³„ì‚°
     â†“
3. [Strategy] ë§¤ë§¤ ì‹ í˜¸ ìƒì„±
     â†“
4. [Strategy] í¬ì§€ì…˜ ì‚¬ì´ì§•
     â†“
5. [Service] ë°±í…ŒìŠ¤íŠ¸ ê²€ì¦
     â†“
6. [Service] ì‹¤ì œ ì£¼ë¬¸ ì‹¤í–‰
     â†“
7. [Helper] ë¸Œë¡œì»¤ API í˜¸ì¶œ
     â†“
8. [Helper] ì²´ê²° ì•Œë¦¼ ë°œì†¡
     â†“
9. [Orchestrator] ì „ì²´ ê²°ê³¼ ì •ë¦¬
```

### 2. ì—ëŸ¬ ì²˜ë¦¬ ì›Œí¬í”Œë¡œìš°
```
ì—ëŸ¬ ê°ì§€ â†’ í•´ë‹¹ Agent ë‚´ë¶€ ì²˜ë¦¬ â†’ ì‹¤íŒ¨ ì‹œ Orchestrator ì—ìŠ¤ì»¬ë ˆì´ì…˜
     â†“              â†“                        â†“
ë¡œê·¸ ê¸°ë¡ â†’ ìë™ ë³µêµ¬ ì‹œë„ â†’ ëŒ€ì²´ ë°©ì•ˆ ì‹¤í–‰ â†’ ì‚¬ìš©ì ì•Œë¦¼
```

### 3. ëª¨ë‹ˆí„°ë§ ì›Œí¬í”Œë¡œìš°
```
ê° Agent ì„±ëŠ¥ ì§€í‘œ ìˆ˜ì§‘ â†’ Orchestrator ì§‘ê³„ â†’ ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸
         â†“                       â†“                 â†“
    ì„ê³„ì¹˜ í™•ì¸ â†’ ì•Œë¦¼ ë°œì†¡ â†’ ìë™ ì¡°ì¹˜ ì‹¤í–‰
```

---

## ğŸ“Š ì„±ëŠ¥ ë° í’ˆì§ˆ ì§€í‘œ

### ì‹œìŠ¤í…œ ë ˆë²¨ KPI
```yaml
availability:
  target: 99.9%
  measurement: "ì‹œìŠ¤í…œ ê°€ë™ì‹œê°„ / ì „ì²´ì‹œê°„"

latency:
  data_processing: "<10ì´ˆ (1000ì¢…ëª© ê¸°ì¤€)"
  signal_generation: "<5ì´ˆ"
  order_execution: "<3ì´ˆ"

throughput:
  concurrent_agents: 5
  max_symbols: 1000
  orders_per_minute: 100

quality:
  data_accuracy: ">99.5%"
  signal_precision: ">60%"
  order_success_rate: ">99%"
```

### ì—ì´ì „íŠ¸ë³„ ì„±ëŠ¥ ëª©í‘œ
| ì—ì´ì „íŠ¸ | ì‘ë‹µì‹œê°„ | ì²˜ë¦¬ëŸ‰ | ì •í™•ë„ | ê°€ìš©ì„± |
|----------|----------|--------|--------|--------|
| Data | <10ì´ˆ | 1000ì¢…ëª© | >99.5% | >99.5% |
| Strategy | <5ì´ˆ | 100ì‹ í˜¸ | >60% | >99.8% |
| Service | <3ì´ˆ | 50ì£¼ë¬¸ | >99% | >99.9% |
| Helper | <2ì´ˆ | APIì œí•œ | >99% | >99.5% |

---

## ğŸ”’ ë³´ì•ˆ ì•„í‚¤í…ì²˜

### ë³´ì•ˆ ê³„ì¸µ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Application Layer                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Agent Isolation                    â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚           File Access Control           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚        API Authentication        â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚    Data Encryption       â”‚   â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë³´ì•ˆ ì •ì±…
1. **ì—ì´ì „íŠ¸ ê²©ë¦¬**: ê° ì—ì´ì „íŠ¸ëŠ” í• ë‹¹ëœ íŒŒì¼ë§Œ ì ‘ê·¼
2. **API í‚¤ ì•”í˜¸í™”**: ëª¨ë“  ì™¸ë¶€ API í‚¤ëŠ” ì•”í˜¸í™” ì €ì¥
3. **ì ‘ê·¼ ë¡œê¹…**: ëª¨ë“  íŒŒì¼ ì ‘ê·¼ì€ ë¡œê·¸ì— ê¸°ë¡
4. **ì •ê¸° ê°ì‚¬**: ì£¼ê°„ ë³´ì•ˆ ê²€í†  ë° ê¶Œí•œ ì ê²€

---

## ğŸš€ í™•ì¥ì„± ë° ìœ ì§€ë³´ìˆ˜

### í™•ì¥ í¬ì¸íŠ¸
1. **ìƒˆë¡œìš´ ì „ëµ**: Strategy Agentì— ì‹ ê·œ ì „ëµ í´ë˜ìŠ¤ ì¶”ê°€
2. **ìƒˆë¡œìš´ ë¸Œë¡œì»¤**: Helper Agentì— ë¸Œë¡œì»¤ API ëª¨ë“ˆ ì¶”ê°€
3. **ìƒˆë¡œìš´ ì§€í‘œ**: Data Agentì— ê¸°ìˆ ì§€í‘œ í•¨ìˆ˜ ì¶”ê°€
4. **ìƒˆë¡œìš´ ì•Œë¦¼**: Helper Agentì— ì•Œë¦¼ ì±„ë„ ì¶”ê°€

### ë²„ì „ ê´€ë¦¬
- **ìŠ¤í‚¤ë§ˆ ë²„ì „**: ì¸í„°í˜ì´ìŠ¤ ë³€ê²½ ì‹œ ë²„ì „ ê´€ë¦¬
- **í•˜ìœ„ í˜¸í™˜ì„±**: ê¸°ì¡´ ì¸í„°í˜ì´ìŠ¤ ìœ ì§€í•˜ë©° ì ì§„ì  ì—…ê·¸ë ˆì´ë“œ
- **ë¡¤ë°± ì§€ì›**: ë¬¸ì œ ë°œìƒ ì‹œ ì´ì „ ë²„ì „ìœ¼ë¡œ ì¦‰ì‹œ ë³µêµ¬

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì‹œìŠ¤í…œ ì‹œì‘ ì „
- [ ] ëª¨ë“  ì„¤ì • íŒŒì¼ ê²€ì¦ ì™„ë£Œ
- [ ] ì—ì´ì „íŠ¸ë³„ ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤ í™•ì¸
- [ ] ì™¸ë¶€ API ì—°ê²° í…ŒìŠ¤íŠ¸ í†µê³¼
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸

### ìš´ì˜ ì¤‘ ëª¨ë‹ˆí„°ë§
- [ ] ê° ì—ì´ì „íŠ¸ ì‘ë‹µ ì‹œê°„ ëª¨ë‹ˆí„°ë§
- [ ] íŒŒì¼ ì ‘ê·¼ ê¶Œí•œ ìœ„ë°˜ ì²´í¬
- [ ] API ì‚¬ìš©ëŸ‰ ë° í•œë„ í™•ì¸
- [ ] ì‹œìŠ¤í…œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì¶”ì 

### ì •ê¸° ì ê²€ (ì£¼ê°„)
- [ ] ë³´ì•ˆ ê°ì‚¬ ë° ê¶Œí•œ ê²€í† 
- [ ] ì„±ëŠ¥ ì§€í‘œ ë¶„ì„ ë° ìµœì í™”
- [ ] ì—ëŸ¬ ë¡œê·¸ ë¶„ì„ ë° ê°œì„ 
- [ ] ë°±ì—… ë° ë³µêµ¬ í…ŒìŠ¤íŠ¸

---

**ğŸ“ ë¬¸ì„œ ìƒíƒœ**: ë©€í‹° ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜ í†µí•© ë¶„ì„ ì™„ë£Œ (2025-09-21)
**ë‹¤ìŒ ì—…ë°ì´íŠ¸**: Service Agent ë°±í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ ì´ê´€ ë° ì‹¤ì œ ìš´ì˜ ì‹œì‘ ì‹œ