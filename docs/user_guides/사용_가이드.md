# Interactive Orchestrator ì‚¬ìš© ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2025-10-10
**ë²„ì „**: 1.0

---

## ğŸš€ ê°„ë‹¨ ì‚¬ìš©ë²•

### ì‹¤í–‰:
```bash
python simple_interactive_orchestrator.py
```

### ì‚¬ìš© ì˜ˆì‹œ:
```
You: Generate signals for AAPL

================================================================================
[User Request] Generate signals for AAPL
================================================================================

--------------------------------------------------------------------------------
[Execution Summary]
--------------------------------------------------------------------------------
[OK] database_agent: success
  Response: [ìš”ì•½ëœ ì‘ë‹µ]

[OK] strategy_agent: success
  Response: [ì½”ë“œ ì¶œë ¥ - ë¡œê·¸ ì°¸ì¡°]

--------------------------------------------------------------------------------
[OK] Success: 2/2 agents

Detailed logs: storage/agent_interactions/session_20251010_133955.log
================================================================================
```

---

## ğŸ“ ì£¼ìš” íŠ¹ì§•

### âœ… ê¹”ë”í•œ ì¶œë ¥
- âŒ **ë””ë²„ê·¸ ë©”ì‹œì§€ ì œê±°**
- âœ… **í•µì‹¬ ì •ë³´ë§Œ í‘œì‹œ**:
  - Agent ì‹¤í–‰ ìƒíƒœ ([OK] / [FAIL])
  - ê°„ê²°í•œ ì‘ë‹µ ìš”ì•½
  - ë¡œê·¸ íŒŒì¼ ìœ„ì¹˜

### ğŸ“Š ì½”ë“œ ì¶œë ¥ ìƒëµ
- Sub-Agentê°€ ì½”ë“œë¥¼ ì‘ì„±í•œ ê²½ìš°:
  - ì½˜ì†”: `[Code output - see logs for details]`
  - ë¡œê·¸ íŒŒì¼: ì „ì²´ ì½”ë“œ í¬í•¨

### ğŸ“ ìƒì„¸ ë¡œê·¸
- ëª¨ë“  í”„ë¡¬í”„íŠ¸ì™€ ì‘ë‹µì€ ë¡œê·¸ íŒŒì¼ì— ì €ì¥
- ìœ„ì¹˜: `storage/agent_interactions/session_*.log`

---

## ğŸ¯ ì§€ì›í•˜ëŠ” ëª…ë ¹

### 1. ì‹œê·¸ë„ ìƒì„±
```
Generate signals for AAPL
Generate trading signals for AAPL, MSFT, GOOGL
```

### 2. ë°ì´í„° ë¡œë“œ
```
Load NASDAQ data
Load market data from MongoDB
```

### 3. ë°±í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```
Run backtest from 2024-01-01 to 2024-06-30
Run backtest for NASDAQ stocks
```

### 4. ë°ì´í„° ë¶„ì„
```
Analyze portfolio performance
Show market statistics
```

---

## ğŸ“– ë¡œê·¸ íŒŒì¼ í™•ì¸

### ë°©ë²• 1: ë¡œê·¸ ë·°ì–´ ì‚¬ìš© (ì¶”ì²œ)
```bash
# ìµœì‹  ì„¸ì…˜ ë³´ê¸°
python view_agent_logs.py

# íŠ¹ì • Agentë§Œ í•„í„°ë§
python view_agent_logs.py --agent strategy_agent

# í†µê³„ë§Œ ë³´ê¸°
python view_agent_logs.py --stats
```

### ë°©ë²• 2: ì§ì ‘ íŒŒì¼ ë³´ê¸°
```bash
# ìµœì‹  ë¡œê·¸ íŒŒì¼
cat storage/agent_interactions/session_*.log | tail -1

# íŠ¹ì • ì„¸ì…˜
cat storage/agent_interactions/session_20251010_133955.log
```

---

## ğŸ” ë¡œê·¸ íŒŒì¼ êµ¬ì¡°

### í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ:
```
================================================================================
[2025-10-10T13:39:55] PROMPT
From: user -> To: orchestrator
ID: e728f463-xxxx-xxxx-xxxx-xxxxxxxxxxxx
--------------------------------------------------------------------------------
Content:
[Orchestratorê°€ ìƒì„±í•œ í”„ë¡¬í”„íŠ¸]

ë‹¹ì‹ ì€ Orchestratorë¡œì„œ ì´ ìš”ì²­ì„ database_agentì—ê²Œ ì „ë‹¬í•´ì•¼ í•©ë‹ˆë‹¤.

**ë‹¹ì‹ ì˜ ì—­í• **:
1. ì‚¬ìš©ì ìš”ì²­ì„ ë¶„ì„í•˜ì—¬ database_agentê°€ ìˆ˜í–‰í•´ì•¼ í•  ì •í™•í•œ ì‘ì—…ì„ íŒŒì•…
2. database_agentì—ê²Œ ì „ë‹¬í•  êµ¬ì²´ì ì´ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ í”„ë¡¬í”„íŠ¸ ìƒì„±
...

Tokens: 165
================================================================================
```

### ì‘ë‹µ ì˜ˆì‹œ:
```
================================================================================
[2025-10-10T13:40:20] RESPONSE
From: strategy_agent -> To: orchestrator
ID: 1d0d1c94-xxxx-xxxx-xxxx-xxxxxxxxxxxx
--------------------------------------------------------------------------------
Content:
```json
{
    "signals": [
        {
            "symbol": "AAPL",
            "signal": "BUY",
            "confidence": 0.85,
            "entry_price": 185.50,
            ...
        }
    ]
}
```

Duration: 18752.00ms
Tokens: 125
Model: gemini-2.5-flash
================================================================================
```

---

## âš™ï¸ ì„¤ì •

### í™˜ê²½ ë³€ìˆ˜:
```bash
# Gemini API Key (í•„ìˆ˜)
export GOOGLE_API_KEY="your-api-key"

# í™•ì¸
echo $GOOGLE_API_KEY
```

### ëª¨ë¸ ì„¤ì •:
- ìœ„ì¹˜: `config/agent_model.yaml`
- Orchestrator: Gemini (í”„ë¡¬í”„íŠ¸ ìƒì„±)
- Sub-Agents: Gemini (ì‘ì—… ì‹¤í–‰)

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ë¡œê·¸ê°€ ìƒì„±ë˜ì§€ ì•ŠëŠ” ê²½ìš°

1. **Gemini API í‚¤ í™•ì¸**:
   ```bash
   echo $GOOGLE_API_KEY
   ```

2. **ë””ë ‰í† ë¦¬ í™•ì¸**:
   ```bash
   ls storage/agent_interactions/
   ```

3. **ê¶Œí•œ í™•ì¸**:
   ```bash
   ls -l storage/agent_interactions/
   ```

### ì¸ì½”ë”© ì˜¤ë¥˜ ë°œìƒ ì‹œ

- **ì¦ìƒ**: `'cp949' codec can't encode character`
- **ì›ì¸**: íŠ¹ìˆ˜ ë¬¸ì (ì´ëª¨ì§€, í™”ì‚´í‘œ ë“±)
- **í•´ê²°**: `simple_interactive_orchestrator.py` ì‚¬ìš© (íŠ¹ìˆ˜ ë¬¸ì ì œê±°ë¨)

### Agent ì‹¤í–‰ ì‹¤íŒ¨ ì‹œ

1. **ë¡œê·¸ íŒŒì¼ í™•ì¸**:
   ```bash
   python view_agent_logs.py --session SESSION_ID
   ```

2. **ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸**:
   - ë¡œê·¸ íŒŒì¼ì—ì„œ `ERROR` ì„¹ì…˜ ì°¾ê¸°
   - Stack Trace í™•ì¸

---

## ğŸ’¡ íŒ

### 1. ë³‘ë ¬ ì‹¤í–‰
í˜„ì¬ ì‹œìŠ¤í…œì€ ìˆœì°¨ ì‹¤í–‰ë§Œ ì§€ì›í•©ë‹ˆë‹¤.
- database_agent â†’ strategy_agent â†’ service_agent

### 2. ì„±ëŠ¥ ìµœì í™”
- ì§§ì€ ëª…ë ¹ ì‚¬ìš©
- ëª…í™•í•œ ìš”ì²­
- ë¶ˆí•„ìš”í•œ íŒŒë¼ë¯¸í„° ì œê±°

### 3. ë¡œê·¸ ê´€ë¦¬
```bash
# ì˜¤ë˜ëœ ë¡œê·¸ ì‚­ì œ
find storage/agent_interactions -name "session_*.log" -mtime +30 -delete

# ë¡œê·¸ ì••ì¶•
tar -czf logs_backup.tar.gz storage/agent_interactions/
```

---

## ğŸ“š ì¶”ê°€ ë¬¸ì„œ

- **ë¡œê·¸ íŒŒì¼ í™•ì¸ ë°©ë²•**: `ë¡œê·¸_íŒŒì¼_í™•ì¸_ë°©ë²•.md`
- **Orchestrator í”„ë¡¬í”„íŠ¸ ìƒì„±**: `Orchestrator_í”„ë¡¬í”„íŠ¸_ìƒì„±_ìˆ˜ì •ì™„ë£Œ.md`
- **í”„ë¡œì íŠ¸ ê·œì¹™**: `CLAUDE.md`

---

## âœ… ë¹ ë¥¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì‹œì‘í•˜ê¸° ì „:
- [ ] Gemini API í‚¤ ì„¤ì • í™•ì¸
- [ ] `storage/agent_interactions/` ë””ë ‰í† ë¦¬ ì¡´ì¬ í™•ì¸
- [ ] Python íŒ¨í‚¤ì§€ ì„¤ì¹˜ í™•ì¸

### ì‹¤í–‰ í›„:
- [ ] Agent ì‹¤í–‰ ìƒíƒœ í™•ì¸ ([OK] / [FAIL])
- [ ] ë¡œê·¸ íŒŒì¼ ìƒì„± í™•ì¸
- [ ] ìƒì„¸ ë¡œê·¸ì—ì„œ í”„ë¡¬í”„íŠ¸/ì‘ë‹µ í™•ì¸

---

**ìš”ì•½**:
1. `python simple_interactive_orchestrator.py` ì‹¤í–‰
2. ìì—°ì–´ë¡œ ëª…ë ¹ ì…ë ¥
3. Agent ì‹¤í–‰ ê²°ê³¼ í™•ì¸
4. ìƒì„¸ ë¡œê·¸ëŠ” `storage/agent_interactions/session_*.log` ì°¸ì¡°
